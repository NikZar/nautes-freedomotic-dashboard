<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-ajax/core-ajax.html">

<polymer-element name="nautes-dashboard-service" attributes="boxesObjects">
  <template>
    <style>
    :host {
      display: none;
    }
    </style>
    <core-ajax id="ajax"
      auto
      url="../api/boxes.json"
      handleAs="json"
      response="{{boxes}}">
    </core-ajax>
  </template>
  <script>
    Polymer("nautes-dashboard-service",{
      created: function() {
        this.boxesObjects = {};
      },
      boxesChanged: function() {
        var boxesObjects = {};
        for (var i = this.boxes.length - 1; i >= 0; i--) {
          var box = this.boxes[i];
          boxesObjects[box.title.toLowerCase()] = box;
        }
        this.boxesObjects = boxesObjects;
      }
    });
  </script>
</polymer-element>
