<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-localstorage/core-localstorage.html">

<polymer-element name="fd-image" attributes="primary alternate width height">
<template>
  <style>
    :host {
      display: block;
    }
  </style>
  <core-localstorage
  name="ssl" 
  value="{{ssl}}">
</core-localstorage>

<core-localstorage
name="apiurl" 
value="{{apiurl}}">
</core-localstorage>

<img id="fdImageImg"
width="{{width}}"
height="{{height}}"></img>
</template>
<script>
  Polymer('fd-image', {
    observe: {
      "primary alternate ssl apiurl": "reloadSrc"
    },
    reloadSrc: function() {
      if (this.ssl != undefined && !!this.apiurl){
        if (!!this.alternate && !!this.primary){
            this.$.fdImageImg.src =  (this.ssl ? "https" : "http") + '://' + this.apiurl + 'resources/' + this.primary + "?fbId=" + this.alternate;
        } else {
          if (!!this.primary){
            this.$.fdImageImg.src =  (this.ssl ? "https" : "http") + '://' + this.apiurl + 'resources/' + this.primary;
          }
          if (!!this.alternate){
            this.$.fdImageImg.src =  (this.ssl ? "https" : "http") + '://' + this.apiurl + 'resources/' + this.alternate;
          }
        }
      }
    }
  });
</script>
</polymer-element>